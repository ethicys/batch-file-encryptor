<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Batch Obfuscator – Educational</title>

<style>
  body {
    background: #0f1117;
    color: #e6e6e6;
    font-family: Consolas, monospace;
    padding: 20px;
  }

  h1 {
    color: #7aa2f7;
  }

  textarea {
    width: 100%;
    background: #1a1b26;
    color: #c0caf5;
    border: 1px solid #333;
    padding: 10px;
    resize: vertical;
  }

  .buttons {
    margin-top: 10px;
  }

  button {
    background: #7aa2f7;
    color: #000;
    border: none;
    padding: 10px 18px;
    cursor: pointer;
    font-weight: bold;
    margin-right: 8px;
  }

  button.reset {
    background: #444;
    color: #fff;
  }

  button:hover {
    opacity: 0.85;
  }

  small {
    color: #888;
  }
</style>
</head>
<body>

<h1>Batch Obfuscator</h1>

<p>Paste your <b>original batch code</b> below (educational use only):</p>

<textarea id="input" rows="10" placeholder="@echo off
echo Hello world"></textarea>

<div class="buttons">
  <button onclick="encode()">Encode</button>
  <button class="reset" onclick="resetAll()">Reset</button>
</div>

<p>Generated <b>.bat</b> file (wrapper changes, payload stays the same):</p>

<textarea id="output" rows="14" readonly></textarea>

<small>
✔ Client-side only • ✔ Random wrapper • ✔ Deterministic payload
</small>

<script>
function randomName(len = 6) {
  return Math.random().toString(36).substring(2, 2 + len);
}

function encode() {
  let code = document.getElementById("input").value;
  if (!code.trim()) return;

  // normalize line endings for CMD
  code = code.replace(/\r?\n/g, "\r\n");

  // payload stays the same → base64 stays the same
  const payloadB64 = btoa(unescape(encodeURIComponent(code)));

  // randomized wrapper
  const varName = randomName();
  const fileName = randomName();

  const result =
`@echo off
setlocal
set "${varName}=${payloadB64}"
echo %${varName}%>"%temp%\\${fileName}.b64"
certutil -decode "%temp%\\${fileName}.b64" "%temp%\\${fileName}.bat" >nul
call "%temp%\\${fileName}.bat"
del "%temp%\\${fileName}.b64"
del "%temp%\\${fileName}.bat"
endlocal`;

  document.getElementById("output").value = result;
}

function resetAll() {
  document.getElementById("input").value = "";
  document.getElementById("output").value = "";
}
</script>

</body>
</html>
